<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ì‚¬ìƒê°€ í†¡ ë¯¸ë‹ˆê²Œì„</title>

<style>
  :root{
    --bg:#f2f2f2;
    --card:#ffffff;
    --accent:#6aa84f;
    --muted:#777;
    --bubble-student:#d7e8ff;
    --bubble-thinker:#f1f1f1;
    font-family:"Noto Sans KR", -apple-system, system-ui;
  }

  body{ margin:0; background:var(--bg); color:#222; }
  .wrap{ max-width:850px; margin:20px auto; padding:20px; }

  header{ display:flex; align-items:center; gap:14px; margin-bottom:16px; }
  .logo{
    width:60px; height:60px; border-radius:20px;
    background:#ffe812; display:flex; align-items:center;
    justify-content:center; font-size:24px; font-weight:800;
    color:#3b1e1e;
  }
  h1{ margin:0; font-size:20px; }

  .phone{
    background:var(--card); border-radius:24px;
    padding:18px; box-shadow:0 6px 20px rgba(0,0,0,0.08);
  }

  .chat{
    height:780px; display:flex; flex-direction:column; gap:14px;
  }

  .top-msg{ max-height:140px; margin-bottom:6px; }

  .messages{
    flex:1; overflow-y:auto; display:flex;
    flex-direction:column; gap:10px; padding:6px;
  }

  .msg{
    max-width:78%; padding:10px 13px; border-radius:18px;
    line-height:1.5; font-size:14px;
    box-shadow:0 1px 3px rgba(0,0,0,0.08);
  }

  .student{
    align-self:flex-end;
    background:var(--bubble-student);
    border-bottom-right-radius:4px;
  }

  .thinker{
    align-self:flex-start;
    background:var(--bubble-thinker);
    border-bottom-left-radius:4px;
  }

  .meta{ font-size:11px; color:var(--muted); margin-bottom:5px; }

  .choices{
    display:flex; flex-direction:column; gap:8px; margin-top:10px;
  }

  .choice{
    width:100%; padding:10px 11px; border-radius:14px;
    background:#fff; border:1px solid #e0e0e0; cursor:pointer;
    font-size:14px; display:flex; justify-content:space-between; align-items:center;
  }

  .choice span:first-child{ font-weight:700; }
  .hint{ font-size:11px; color:#666; }

  .choice:hover{ background:#eef8ff; }

  .controls{ display:flex; gap:10px; margin-top:14px; }

  .btn{
    padding:9px 13px; border-radius:10px; border:0;
    background:var(--accent); color:#fff; font-weight:700;
    cursor:pointer; font-size:13px;
  }

  .btn.secondary{
    background:#fff; border:1px solid #ccc; color:#333;
  }

  .scorebar{
    display:flex; justify-content:space-between; align-items:center; margin-bottom:6px;
  }

  .progress{
    flex:1; height:8px; background:#e3e3e3;
    border-radius:6px; margin:0 12px; overflow:hidden;
  }

  .progress > i{
    height:100%; display:block;
    background:linear-gradient(90deg,#b9f6ca,#6aa84f);
    width:0%;
  }

  .bubble-enter{ animation:bIn .3s ease; }
  @keyframes bIn{
    from{opacity:0; transform:translateY(6px);}
    to{opacity:1; transform:translateY(0);}
  }
</style>
</head>

<body>
<div class="wrap">

<header>
  <div class="logo">í†¡</div>
  <div><h1>ì¹œêµ¬ ê³ ë¯¼ í†¡ìœ¼ë¡œ ì‚¬ìƒê°€ì˜ ë„ë• ê¸°ì¤€ì„ ë§ì¶°ë³´ì„¸ìš”</h1></div>
</header>

<div class="phone">
  <div class="chat">

    <div class="top-msg" id="topMsg"></div>

    <div class="messages" id="messages"></div>

    <div id="uiArea">

      <div class="scorebar">
        <div style="font-size:13px;color:#555">ë¬¸ì œ <b id="qIndex">1</b> / 10</div>
        <div class="progress"><i id="prog"></i></div>
        <div style="font-size:13px;color:#555">ì ìˆ˜ <b id="score">0</b></div>
      </div>

      <div id="choices" class="choices"></div>

      <div class="controls">
        <button class="btn secondary" id="revealBtn">ì •ë‹µ ë³´ê¸°</button>
        <button class="btn" id="nextBtn" disabled>ë‹¤ìŒ ë¬¸ì œ â–¶</button>
      </div>

      <div id="explain" style="display:none;margin-top:10px;padding:11px;border-radius:10px;background:#fbfbfb;border:1px dashed #ddd;font-size:14px;color:#444"></div>

    </div>
  </div>
</div>

</div>

<script>
// í•œ ì¤„ ì •ë¦¬ ìœ ì§€
const thinkers = {
  kant:{label:"ì¹¸íŠ¸", hint:"ì˜ë¬´ë¥¼ ì§€í‚¤ëŠ” ê²ƒì´ ì˜³ë‹¤", desc:"ì•„ë¬´ë„ ë³´ì§€ ì•Šì•„ë„ ë„ë• ì›ì¹™ì„ ì§€í‚¤ëŠ” ê²ƒì´ ì¤‘ìš”í•´."},
  bentham:{label:"ë²¤ë‹´", hint:"ìµœëŒ€ ë‹¤ìˆ˜ì˜ ìµœëŒ€ í–‰ë³µ", desc:"í–‰ë™ì´ ì–¼ë§ˆë‚˜ ë§ì€ ì‚¬ëŒì—ê²Œ í–‰ë³µì„ ì£¼ëŠ”ì§€ê°€ ê¸°ì¤€ì´ì•¼."},
  aristotle:{label:"ì•„ë¦¬ìŠ¤í† í…”ë ˆìŠ¤", hint:"ê³¼í•˜ì§€ë„ ë¶€ì¡±í•˜ì§€ë„ ì•Šê²Œ", desc:"ì¤‘ìš©, ì¦‰ ì§€ë‚˜ì¹˜ì§€ ì•ŠìŒì´ ì¤‘ìš”í•œ ë„ë• ê¸°ì¤€ì´ì•¼."},
  confucius:{label:"ê³µì", hint:"ì¸(ä»)ìœ¼ë¡œ ìƒëŒ€ ê³µê°í•˜ê¸°", desc:"ìƒëŒ€ì˜ ë§ˆìŒì„ ë¨¼ì € í—¤ì•„ë¦¬ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•´."},
  buddha:{label:"ì„ê°€ëª¨ë‹ˆ", hint:"ëª¨ë“  ìƒëª…ì— ìë¹„ ë² í’€ê¸°", desc:"ê³ í†µì„ ì¤„ì—¬ì£¼ë ¤ëŠ” ìë¹„ë¡œìš´ íƒœë„ê°€ ë„ë•ì ì´ì•¼."},
  laozi:{label:"ë…¸ì", hint:"ì–µì§€ë¡œ í•˜ì§€ ì•Šê³  ìì—°ìŠ¤ëŸ½ê²Œ", desc:"ì–µì§€ë¡œ í•˜ì§€ ì•Šê³  ìì—°ìŠ¤ëŸ¬ì›€ì„ ë”°ë¥´ëŠ” ê²Œ ì˜³ì•„."}
};

// ë¬¸ì œ ëª©ë¡
let DATA = [
  {name:"ë¯¼í˜¸", student:"ì•¼â€¦ ë‚˜ ë°©ê¸ˆ ì¹œêµ¬ ì§€ê°‘ì„ ì£¼ì› ëŠ”ë°, ì•„ë¬´ë„ ëª» ë´¤ì–´. ê·¸ëƒ¥ ê°€ì ¸ê°€ë©´ ëª¨ë¥¼ ê²ƒ ê°™ê¸´ í•œë°â€¦ ê³„ì† ì°ì°í•´. ì–´ë–»ê²Œ í•´ì•¼ í•˜ì§€?", reply:"ë¯¼í˜¸ì•¼, ì•„ë¬´ë„ ëª» ë´¤ë‹¤ê³  í•´ë„ ë„¤ê°€ ì§€ì¼œì•¼ í•˜ëŠ” ì›ì¹™ì€ ë³€í•˜ì§€ ì•Šì•„. ì˜³ì€ ì¼ì„ ì„ íƒí•´ë³´ì.", answer:"kant"},
  {name:"í•˜ë¦°", student:"í•™êµ í–‰ì‚¬ì—ì„œ ì¬í™œìš©í’ˆ ì‘í’ˆì„ ë§Œë“¤ê¸°ë¡œ í–ˆëŠ”ë°, ë‹¤ìˆ˜ëŠ” ì‰½ê²Œ ë§Œë“¤ ê±¸ ì›í•˜ê³  ëª‡ëª‡ì€ ì˜ë¯¸ ìˆëŠ” ê±¸ í•˜ìê³  í•´. ë­ê°€ ì¢‹ì„ê¹Œ?", reply:"í•˜ë¦°ì•„, ì–´ë–¤ ì„ íƒì´ ë” ë§ì€ ì¹œêµ¬ë“¤ì—ê²Œ í–‰ë³µì„ ì¤„ì§€ ìƒê°í•´ë³´ì.", answer:"bentham"},
  {name:"ì¬ìœ¤", student:"ë°˜ì—ì„œ ë¯¼ìˆ˜ê°€ ë‹¤ë¥¸ ì• ë¥¼ ë†€ë ¸ëŠ”ë°â€¦ ë„ˆë¬´ ì„¸ê²Œ ë§í•˜ë©´ ë¶„ìœ„ê¸° ë‚˜ë¹ ì§€ê³  ë„ˆë¬´ ê°€ë³ê²Œ ë§í•˜ë©´ ì¹œêµ¬ê°€ ìƒì²˜ë°›ì„ ê²ƒ ê°™ì•„. ë­ë¼ê³  í•´ì•¼ í• ê¹Œ?", reply:"ì¬ìœ¤ì•„, ë„ˆë¬´ ê³¼í•˜ì§€ë„ ë¶€ì¡±í•˜ì§€ë„ ì•Šê²Œ ì ë‹¹í•œ ë°©ì‹ìœ¼ë¡œ ë§í•´ë³´ì.", answer:"aristotle"},
  {name:"ì†Œìœ¨", student:"ë™ìƒì´ ë˜ ì¥ë‚œì³ì„œ í™”ê°€ ë‚˜ëŠ”ë°â€¦ ì†Œë¦¬ì¹˜ìë‹ˆ ë¯¸ì•ˆí•˜ê³  ê·¸ëƒ¥ ë„˜ê¸°ìë‹ˆ ì–µìš¸í•´. ì–´ë–»ê²Œ í•´ì•¼ í•´?", reply:"ì†Œìœ¨ì•„, í™”ë¥¼ ë‚´ê¸° ì „ì— ë™ìƒì˜ ë§ˆìŒì„ ë¨¼ì € ìƒê°í•´ë³´ë©´ ì¢‹ê² ì–´.", answer:"confucius"},
  {name:"ì¤€í˜¸", student:"í•™êµ ì˜¤ëŠ” ê¸¸ì— ë‹¤ì¹œ ê³ ì–‘ì´ë¥¼ ë´¤ëŠ”ë°â€¦ ë„ì™€ì£¼ìë‹ˆ ì‹œê°„ ê±±ì •ë˜ê³  ê·¸ëƒ¥ ì§€ë‚˜ì¹˜ìë‹ˆ ë§ˆìŒì´ ì“°ì—¬. ì–´ë–»ê²Œ í•´ì•¼ í•˜ì§€?", reply:"ì¤€í˜¸ì•¼, ëª¨ë“  ìƒëª…ì—ê²Œ ìë¹„ë¥¼ ë² í‘¸ëŠ” ë§ˆìŒì„ í•œ ë²ˆ ë– ì˜¬ë ¤ë³´ì.", answer:"buddha"},
  {name:"ë‹¤ì—°", student:"ì¹œêµ¬ê°€ ì‹¤ìˆ˜í–ˆëŠ”ë° ë‚´ê°€ ì–µì§€ë¡œ ë­ë¼ í•˜ë©´ ë” ë¬¸ì œë  ê²ƒ ê°™ì•„. ë‚˜ì„œì•¼ í• ê¹Œ?", reply:"ë‹¤ì—°ì•„, ì–µì§€ë¡œ í•´ê²°í•˜ë ¤ í•˜ì§€ ë§ê³  ì¡°ê¸ˆ ìì—°ìŠ¤ëŸ½ê²Œ í˜ëŸ¬ê°€ê²Œ ê¸°ë‹¤ë ¤ë³´ëŠ” ê²ƒë„ ë°©ë²•ì´ì•¼.", answer:"laozi"},
  {name:"ë„í˜„", student:"ì¹œêµ¬ê°€ ì‹œí—˜ ì „ì— ë‹µ ì•Œë ¤ë‹¬ë¼ê³  í•´ì„œ ê³ ë¯¼ì´ì•¼â€¦ ê·œì¹™ ì–´ê¸°ëŠ” ê±°ë¼ì„œ.", reply:"ë„í˜„ì•„, ì •ì§í•˜ê²Œ ì„í•˜ëŠ” ê±´ ì§€ì¼œì•¼ í•  ì›ì¹™ì´ì•¼.", answer:"kant"},
  {name:"ê°€ìœ¤", student:"êµì‹¤ ë¶„ìœ„ê¸° ê°œì„  í™œë™ì„ ì •í•´ì•¼ í•˜ëŠ”ë° ë‹¤ìˆ˜ëŠ” ì‰¬ìš´ ê±¸ ì›í•˜ê³  ëª‡ ëª…ì€ ì˜ë¯¸ ìˆëŠ” í™œë™ì„ ì›í•´. ë­ê°€ ì¢‹ì„ê¹Œ?", reply:"ê°€ìœ¤ì•„, ì–´ë–¤ ì„ íƒì´ ë§ì€ ì¹œêµ¬ì—ê²Œ ê¸°ì¨ì„ ì¤„ì§€ ìƒê°í•´ë³´ì.", answer:"bentham"},
  {name:"ì‹œì˜¨", student:"ì¹œêµ¬ê°€ ì¶•ì œ ì¤€ë¹„ ë•Œë¬¸ì— í˜ë“¤ëŒ€ì„œ ê³ ë¯¼ì„ í„¸ì–´ë†¨ëŠ”ë°â€¦ ë„ˆë¬´ ì†”ì§í•˜ë©´ ìƒì²˜ ì¤„ê¹Œ ê³ ë¯¼ë¼.", reply:"ì‹œì˜¨ì•„, ë• ìˆëŠ” ì‚¬ëŒì´ í•  ë§ì„ ë– ì˜¬ë ¤ë³´ë©´ ì¢‹ê² ì–´.", answer:"aristotle"},
  {name:"í•˜ì¤€", student:"ì²´ìœ¡ ì‹œê°„ íŒ€ ë‚˜ëˆ„ëŠ” ê±¸ ë‘ê³  ë°˜ ë¶„ìœ„ê¸°ê°€ ì–´ìˆ˜ì„ í•´. ë‚´ê°€ ë‚˜ì„œë©´ ë” ë³µì¡í•´ì§ˆê¹Œ?", reply:"í•˜ì¤€ì•„, ê¼­ ë„¤ê°€ ë‚˜ì„œì§€ ì•Šì•„ë„ ë  ìˆ˜ë„ ìˆì–´. ìì—°ìŠ¤ëŸ½ê²Œ í˜ëŸ¬ê°€ê²Œ í•˜ëŠ” ê²ƒë„ ì„ íƒì´ì•¼.", answer:"laozi"}
];

// ğŸ”¥ ë¬¸ì œ ìˆœì„œ ëœë¤ ì…”í”Œ
DATA = DATA
  .map(v => ({v, sort:Math.random()}))
  .sort((a,b)=>a.sort-b.sort)
  .map(obj=>obj.v);

// ëœë¤ ì˜¤ë‹µ ë©”ì‹œì§€
const wrongMessages = [
  "ì¡°ê¸ˆ ë‹¤ë¥´ê²Œ ìƒê°í•´ë³¼ê¹Œ?",
  "ì•„ì§ ì •ë‹µì€ ì•„ë‹ˆì•¼. í•œ ë²ˆ ë” ê³ ë¯¼í•´ë³´ì!",
  "ì¢‹ì€ ì‹œë„ì˜€ì–´! ë‹¤ì‹œ í•œ ë²ˆ ìƒê°í•´ë³¼ë˜?",
  "ì¡°ê¸ˆë§Œ ë” ìƒê°í•˜ë©´ ë§ì¶œ ìˆ˜ ìˆì„ ê²ƒ ê°™ì•„!",
  "ì‚¬ìƒê°€ë“¤ì˜ ê¸°ì¤€ì„ ë– ì˜¬ë ¤ë³´ì."
];

let idx=0, score=0, firstTry=true;

const topMsg=document.getElementById("topMsg");
const messages=document.getElementById("messages");
const choicesDiv=document.getElementById("choices");
const qIndex=document.getElementById("qIndex");
const prog=document.getElementById("prog");
const scoreEl=document.getElementById("score");
const explain=document.getElementById("explain");
const revealBtn=document.getElementById("revealBtn");
const nextBtn=document.getElementById("nextBtn");

// ê³ ë¯¼ í†¡ ê³ ì •
function setTopMessage(item){
  topMsg.innerHTML=
    `<div class="msg student">
      <div class="meta">${item.name}ê°€ ë³´ë‚¸ ê³ ë¯¼ í†¡ ğŸ’¬</div>
      ${item.student}
    </div>`;
}

// ë©”ì‹œì§€ ì¶”ê°€ + ìë™ ìŠ¤í¬ë¡¤
function pushMsg(html, cls, meta){
  const el=document.createElement("div");
  el.className="msg bubble-enter "+cls;
  el.innerHTML=(meta?`<div class='meta'>${meta}</div>`:"")+html;
  messages.appendChild(el);
  messages.scrollTop=messages.scrollHeight;
}

function renderQuestion(){
  explain.style.display="none"; explain.innerHTML="";
  nextBtn.disabled=true;
  revealBtn.disabled=false;
  choicesDiv.innerHTML="";
  messages.innerHTML="";
  firstTry=true;  // ğŸ”¥ ìƒˆ ë¬¸ì œ ì‹œì‘ ì‹œ trueë¡œ ì´ˆê¸°í™”

  qIndex.textContent=idx+1;
  prog.style.width=(idx/10*100)+"%";
  scoreEl.textContent=score;

  const item=DATA[idx];
  setTopMessage(item);

  setTimeout(()=>{
    pushMsg(item.reply,"thinker","ì‚¬ìƒê°€ì˜ ë‹µì¥ âœ‰ï¸");

    Object.keys(thinkers).forEach(k=>{
      const btn=document.createElement("button");
      btn.className="choice";
      btn.dataset.key=k;
      btn.innerHTML=
        `<span>${thinkers[k].label}</span>
         <span class="hint">${thinkers[k].hint}</span>`;
      btn.onclick=choose;
      choicesDiv.appendChild(btn);
    });
  },500);
}

function choose(e){
  const pick=e.currentTarget.dataset.key;
  const item=DATA[idx];

  if(pick===item.answer){
    // ğŸ”¥ ì •ë‹µì¼ ë•Œ ì ìˆ˜ëŠ” firstTryì¼ ë•Œë§Œ ì¦ê°€
    if(firstTry){
      score++;
      scoreEl.textContent=score;
    }

    Array.from(choicesDiv.children).forEach(b=>b.disabled=true);
    e.currentTarget.style.background="#d3f9d8";

    pushMsg(`ì •ë‹µì´ì•¼! ì§€ê¸ˆ ì„ íƒì€ ${thinkers[pick].label}ì˜ ê´€ì ê³¼ ì˜ ë§ì•„. ğŸ‘`,"thinker");
    explain.style.display="block";
    explain.textContent = thinkers[pick].desc;

    nextBtn.disabled=false;
    revealBtn.disabled=true;
  }

  else {
    // ğŸ”¥ ì˜¤ë‹µ â†’ firstTry=false
    firstTry = false;

    const msg = wrongMessages[Math.floor(Math.random()*wrongMessages.length)];
    pushMsg(msg,"thinker","ë‹¤ì‹œ ìƒê°í•´ë³´ê¸° âœï¸");
  }
}

revealBtn.onclick=()=>{
  const item=DATA[idx];
  pushMsg(`ì •ë‹µì€ ${thinkers[item.answer].label}ì˜ ê´€ì ì´ì•¼.`,"thinker","ì •ë‹µ ì•ˆë‚´");
  explain.style.display="block";
  explain.textContent = thinkers[item.answer].desc;
  nextBtn.disabled=false;
  revealBtn.disabled=true;
  Array.from(choicesDiv.children).forEach(b=>b.disabled=true);
};

nextBtn.onclick=()=>{
  idx++;
  if(idx>=DATA.length){
    finish();
  } else {
    renderQuestion();
  }
};

function finish(){
  prog.style.width="100%";
  const html=
    `<div style="font-size:22px;font-weight:800;margin-top:20px;">ê²Œì„ ì™„ë£Œ!</div>
     <div style="margin-top:8px;font-size:16px;">ìµœì¢… ì ìˆ˜: ${score} / 10</div>
     <button class="btn" style="margin-top:14px;" onclick="location.reload()">ë‹¤ì‹œí•˜ê¸°</button>`
  document.getElementById("uiArea").innerHTML = html;
}

renderQuestion();
</script>

</body>
</html>
